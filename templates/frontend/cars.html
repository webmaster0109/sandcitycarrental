{% extends "base/base.html" %}

{% block content %}
<section class="pt-0">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<!-- Booking from START -->
				<form class="bg-mode border rounded position-relative px-4 pt-4 mb-4 mb-sm-0" method="GET" action="{% url 'booking_search' %}">
    
                    <div class="row g-4 position-relative">
    
                        <!-- Nav tabs START -->
                        <div class="col-lg-6">
                            <ul class="nav nav-pills nav-pills-dark" id="pills-tab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link rounded-3 rounded-0 mb-0 active" id="pills-round-trip-tab" 
                                    data-bs-toggle="pill" data-bs-target="#pills-round-trip" type="button" role="tab" aria-selected="false">Sandcity Rent A Car</button>
                                </li>
                            </ul>
                        </div>
                        <!-- Nav tabs END -->
    
                        <!-- Car Category class -->
                        <div class="col-lg-3 ms-auto">
                            <div class="form-control-bg-light form-fs-md">
                                <select class="form-select js-choice" data-search-enabled="true" name="car_category">
                                    <option value="" >Select Car Category</option>
                                    {% for cat in car_types %}
                                    <option name="car_category" {% if car_type in cat.car_types %}selected{% endif %} value="{{cat.car_types}}">{{cat.car_types}}</option>
                                    {% endfor %}
                                </select>
                            </div>	
                        </div>

                            <!-- Tab content START -->
                            <div class="tab-content mt-4" id="pills-tabContent">
    
                        <!-- Round way tab END -->
                        <div class="tab-pane fade show active" id="pills-round-trip" role="tabpanel" aria-labelledby="pills-round-trip-tab">
                        <div class="row g-4">
    
                            <!-- Leaving From -->
                            <div class="col-md-6 col-xl-3 position-relative">
                            <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                                <!-- Input field -->
                                <label class="mb-1"><i class="bi bi-geo-alt me-2"></i>Pickup Location</label>
                                <select class="form-select js-choice">
                                <option selected>Dubai, Downtown</option>
                                </select>
                            </div>
                            
                            <!-- Auto fill button -->
                            <div class="btn-flip-icon mt-3 mt-md-0">
                                <a href="javascript:void(0);" class="btn btn-white shadow btn-round mb-0"><i class="fa-solid fa-right-left"></i></a>
                            </div>
                            </div>
    
                            <!-- Going To -->
                            <div class="col-md-6 col-xl-3">
                            <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                                <!-- Input field -->
                                <label class="mb-1"><i class="bi bi-send me-2"></i>Return Location</label>
                                <select class="form-select js-choice">
                                <option value="">Select location</option>
                                <option selected>Dubai, Downtown</option>
                                </select>
                            </div>
                            </div>
    
                            <!-- Departure -->
                            <div class="col-md-6 col-xl-3">
                            <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                                <label class="mb-1"><i class="bi bi-calendar me-2"></i>Pickup Date</label>
                                <input type="text" class="form-control flatpickr" data-date-format="Y-m-d" name="pickup_date" placeholder="Select date">
                            </div>
                            </div>
    
                            <!-- Return -->
                            <div class="col-md-6 col-xl-3">
                            <div class="form-border-transparent form-fs-lg bg-light rounded-3 h-100 p-3">
                                <label class="mb-1"><i class="bi bi-calendar me-2"></i>Return Date</label>
                                <input type="text" class="form-control flatpickr" name="return_date" data-date-format="Y-m-d" placeholder="Select date">
                            </div>
                            </div>
    
                            <div class="col-12 text-end pt-0">
                                <button class="btn btn-orange mb-n4" type="submit">Search<i class="bi bi-arrow-right ps-3"></i></button>
                            </div>
                        </div>
                        </div>
                        <!-- Round way tab END -->
                    </div>
                    <!-- Tab content END -->
                    </div>
                </form>
				<!-- Booking from END -->
			</div>
		</div>
	</div>
</section>


<section class="pt-0">
	<div class="container">
		<div class="row g-4">

			<!-- Card item START -->
            {% for car in cars %}
			<div class="col-md-6 col-xl-4">
				<div class="card shadow p-2 pb-0 h-100">
					<!-- Overlay item -->
					<div class="position-absolute top-0 start-0 z-index-1 m-4">
						<div class="badge bg-danger text-white">{{car.year}}</div>
					</div>

					<!-- Slider START -->
					<div class="tiny-slider arrow-round arrow-xs arrow-dark rounded-2 overflow-hidden">
						<div class="tiny-slider-inner" data-autoplay="false" data-arrow="true" data-dots="false" data-items="1">
							<!-- Image item -->
                            {% for image in car.carimages_set.all %}
							<div><img src="{{image.car_images.url}}" alt="{{image.car_images.url}}"></div>
                            {% endfor %}
						</div>
					</div>
					<!-- Slider END -->

					<!-- Card body START -->
					<div class="card-body px-3 pb-0">

						<!-- Title -->
                        <span class="small mb-2"><i class="far fa-calendar-alt me-2"></i>{% if total_days %}{{total_days}} days{% else %}1 day{% endif %} Trip</span>
						<h5 class="card-title"><a href="{% url 'car_details' car.slug %}">{{car.brand}}</a></h5>

						<!-- List -->
						<ul class="nav nav-divider mb-2 mb-sm-3">
                            {% for feature in car.carfeatures_set.all|slice:":3" %}
							<li class="nav-item">{{feature.features}}</li>
                            {% endfor %}
						</ul>
					</div>
					<!-- Card body END -->

					<!-- Card footer START-->
					<div class="card-footer pt-0">
						<!-- Price and Button -->
                        <div><small class="fw-bold fs-6 text-dark">Starting from*</small></div>
						<div class="d-sm-flex justify-content-sm-between align-items-center">
							<!-- Price -->
							<div class="d-flex align-items-center">
								<h5 class="fw-normal text-danger mb-0 me-1">AED {{car.discounted_price}}</h5>
								<span class="mb-0 me-2">{% if total_days %}for {{total_days}} days{% else %}per day{% endif %} </span>
							</div>
							<!-- Button -->
							<div class="mt-2 mt-sm-0">
								<a href="{% url 'car_details' car.slug %}" class="btn btn-sm btn-primary-soft mb-0 w-100">Select<i class="bi bi-arrow-right ms-2"></i></a>    
							</div>
						</div>
					</div>
				</div>
			</div>
            {% endfor %}
			<!-- Card item END -->

		</div> <!-- Row END -->
	</div>
</section>
{% endblock %}